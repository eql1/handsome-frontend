<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="css/main.css" />
  </head>
  <body>
    <section>
      <h1>Scroll down for awesomeness.</h1>
    </section>

    <section>
      <p class="reveal-type" data-bg-color="#cccccc" data-fg-color="teal">
        Systematically ushering in a new generation of amazing designers from
        across the globe.
      </p>
    </section>
    <section>
      <p class="reveal-type" data-bg-color="#b6b600" data-fg-color="black">
        Modern UI designers will expand their skillsets to include frontend.
      </p>
    </section>
    <section>
      <p class="reveal-type" data-bg-color="#353535" data-fg-color="red">
        The web isn't static anymore, interactivity and motion now dominate.
      </p>
    </section>
    <section></section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/split-type@0.3.3/umd/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.25/bundled/lenis.min.js"></script>
    <script>
      gsap.registerPlugin(ScrollTrigger);

      const splitTypes = document.querySelectorAll(".reveal-type");

      splitTypes.forEach((char, i) => {
        const bg = char.dataset.bgColor;
        const fg = char.dataset.fgColor;

        const text = new SplitType(char, { types: "chars" }); // todo: try also words in types

        gsap.fromTo(
          text.chars,
          {
            color: bg,
          },
          {
            color: fg,
            duration: 0.3,
            stagger: 0.1,
            scrollTrigger: {
              trigger: char,
              start: "top 80%",
              end: "top 35%",
              scrub: true,
              markers: true,
            },
          }
        );
      });
      //     gsap.from(text.chars, {
      //       scrollTrigger: {
      //         trigger: char,
      //         start: "top 80%",
      //         end: "top 20%",
      //         scrub: true,
      //         markers: false,
      //       },
      //       y: -20,
      //       scaleY: 0,
      //       transformOrigin: "top", // bottom looks nice too
      //       stagger: 0.1,
      //       duration: 1,
      //     });
      //   });

      const lenis = new Lenis();

      lenis.on("scroll", (e) => {
        //console.log(e);
      });

      function raf(time) {
        lenis.raf(time);
        requestAnimationFrame(raf);
      }

      requestAnimationFrame(raf);
    </script>
  </body>
</html>
